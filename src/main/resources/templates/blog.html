<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="_fragment :: head(~{::title})">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
</head>
<body>
    <!-- Navigation -->
    <nav th:replace="_fragment :: navi(1)" class="ui inverted attached segment m-padding-tb-mini m-shadow-small">
    </nav>
    <br/>


    <!-- 中间内容 -->
    <div id="waypoint" class="m-container-small m-padding-tb-large">
        <div class="ui container">
            <div class="ui top attached segment">
                <!-- 头部 Header -->
                <div class="ui horizontal link list">
                    <div class="item">
                        <img th:src="@{${blog.user.avatar}}" src="https://www.machinecurve.com/wp-content/uploads/2019/07/thispersondoesnotexist-1-1022x1024.jpg" alt="avatar" class="ui avatar image">
                        <div class="content">
                            <a class="header" th:href="@{/about-me}"><span th:text="${blog.user.username}">Christian Versloot</span></a>
                        </div>
                    </div>
                    <div class="item">
                        <i class="calendar outline icon"></i><span th:text="${#dates.format(blog.updateTime,'yyyy-MM-dd')}">26-1-2021</span>
                    </div>
                    <div class="item">
                        <i class="eye icon"><span th:text="${blog.views}">2431</span></i>
                    </div>
                </div>
            </div>
            <div class="ui attached segment">
                <!-- 图片 Images -->
                <img th:src="@{${blog.firstPicture}}" src="https://images.unsplash.com/photo-1599740746781-315ed467db0a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80" alt="rocky mountain" class="ui fluid rounded image">
            </div>
            <div class="ui attached padded segment js-toc-content">
                <!-- 内容 Content -->
                <div class="ui right aligned basic segment">
                   <div class="ui label basic orange">
                    <span th:text="${blog.flag}">Original</span>
                    </div>
                </div>
                <h2 id="section0" class="ui center aligned header" th:text="${blog.title}">
                    你真的理解什么是财富吗？
                </h2>
                <br>

                <div id="content" class="m-padded-lr m-padding-tb-small typo typo-selection" th:utext="${blog.content}">
                    <p>
                        这么多年我一直在思考关于财富自由的定义，看了百度百科的定义 <br><br>

                        财富自由：就是有足够多的钱和时间做你想做的事情 <br><br>

                        这个定义对我来说虽然有意义，但是没有足够的行动指导意义，所以我自己琢磨出一个自己对财富自由的定义: <br><br>


                        <strong>所谓的财富自由就是一个人在也无需为了生活必需而出售自己的时间 </strong><br><br>


                        这个定义足够朴素有效，你看本质上来看我们要的不是钱，而是“自由”，可是现实中很多人真的不是这样想的，不信你看看身边有多少人是这样说的，等我有了钱我就天天打游戏······，这基本就是一个万能套用句型，有了钱之后想做的事暴露了他们的真实想法，如果你有了钱以后的真实目的只是“打游戏”，那你现在就可以开始打啊，还需要等到有了钱以后再做这件事吗？你这样说的时候实际上你是把“打游戏”放在比“财富自由”更重要的地位上去了。


                        你看“财富自由”根本就不应该是终点站，最多只能是个里程碑，财富自由之后还有更重要的事情等着我们去做，而并不是像绝大多数人所想象的“财富自由“是他们的终极目标

                        财富自由本质上来看我们要的不是钱，而是“自由”，而很多人根本就搞错了，他们要的就是钱。
                    </p><br>
                    <br>
                    <h3 id="section1">如何在 Java 中编写 Hello World 程序</h3>
                    <div class="line-numbers">
<pre><code class="language-java">public class Main{
    public static void main(String[] args){
        System.out.println("Hello World!");
    }
}
                </code></pre>
                    </div>
                    <br><br>

                </div>

                <!-- 标签 -->
                <div class="m-padded-lr m-padding-tb-small">
                    <div class="ui teal basic label" th:each="tag:${blog.tags}" th:text="${tag.name}">Function</div>
                </div>

                <!-- 赞赏的功能 -->
                <div th:if="${blog.appreciation}">
                    <div class="ui center aligned basic segment">
                        <button id="payBtn" class="ui orange basic circular button"> Like </button>
                    </div>
                    <div class="ui pay flowing popup transition hidden">
                        <div class="ui orange basic label">
                            <div class="ui image" style="font-size: inherit !important">
                                <div class="image center aligned">
                                    <div class="image">
                                        <img th:src="@{/images/alibaba-qrcode.jpeg}" alt="qrcode" class="ui rounded bordered image" style="width:120px">
                                        <div>支付宝</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                </div>

                </div>


            </div>
            <div class="ui attached positive message" th:if="${blog.shareStatement}">
                <!-- 博客信息 Blog Information -->
                <div class="ui middle grid">
                    <div class="eleven wide column">
                        <div class=" ui list">
                            <li>Author： <span th:text="${blog.user.username}"><a th:href="@{/about}" target="_blank">李强</a></span></li>
                            <li>Posted on：<span th:text="${#dates.format(blog.createTime,'yyyy-MM-dd')}">2018-02-22</span> </li>
                            <li>Copyright Notice： 自由转载-非商用-保持署名（创意 3.0 许可证）</li>
                            <li>Official Account Repost：请在文末添加作者公众号二维码</li>
                        </div>
                    </div>
                    <div class="five wide column">
                        <img th:src="@{/images/qr-code.png}" alt="qrcode" class="ui right floated rounded bordered image" style="width:110px;">
                    </div>
                </div>
            </div>
            <div id="comment-container" class="ui bottom attached segment">
                <!-- 留言区 Comment Area -->
                <div id="comment-place" class="ui teal segment" th:if="${blog.commentabled}">
                    <div th:fragment="commentList">
                        <div class="ui comments" style="max-width: 100%;">
                            <h3 class="ui dividing header" >Comments</h3>
                            <div class="comment" th:each="comment:${comments}">
                                <a class="avatar">
                                    <img th:src="@{${comment.avatar}}" src="https://semantic-ui.com/images/avatar/small/matt.jpg">
                                </a>
                                <div class="content">
                                    <a class="author">
                                        <span th:text="${comment.nickname}">Matt</span>
                                        <span class="ui mini teal basic left pointing label m-padding-mini" th:if="${comment.adminComment}">>Blogger</span>
                                    </a>
                                    <div class="metadata">
                                        <span class="date" th:text="${#dates.format(comment.createTime,'yyyy-MM-dd HH:mm')}">Today at 5:42PM</span>
                                    </div>
                                    <div class="text" th:text="${comment.content}">
                                        How artistic!
                                    </div>
                                    <div class="actions">
                                        <a class="reply" data-commentid="1" data-commentusername="Matt" th:attr="data-commentid=${comment.id},data-commentusername=${comment.nickname}" onclick="reply(this)">Reply</a>
                                    </div>
                                </div>
                                <div class="comments" th:if="${#arrays.length(comment.replyComment)>0}">
                                    <div class="comment" th:each="reply:${comment.replyComment}">
                                        <a class="avatar">
                                            <img th:src="@{${reply.avatar}}" src="https://semantic-ui.com/images/avatar/small/matt.jpg">
                                        </a>
                                        <div class="content">
                                            <a class="author" >
                                                <span th:text="${reply.nickname}">Matt</span>
                                                <span class="ui mini teal basic left pointing label m-padding-mini" th:if="${reply.adminComment}">Blogger</span>
                                                <span th:text="| @ ${reply.parentComment.nickname}|" style="color: #00B5AD !important;">@AMx</span>
                                            </a>
                                            <div class="metadata">
                                                <span class="date" th:text="${#dates.format(reply.createTime,'yyyy-MM-dd HH:mm')}">Today at 5:42PM</span>
                                            </div>
                                            <div class="text" th:text="${reply.content}">
                                                How artistic!
                                            </div>
                                            <div class="actions">
                                                <a class="reply" data-commentid="1" data-commentusername="Matt" th:attr="data-commentid=${reply.id},data-commentusername=${reply.nickname}" onclick="reply(this)">Reply</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--/*-->
                            <div class="comment">
                                <a class="avatar">
                                    <img src="https://semantic-ui.com/images/avatar/small/elliot.jpg">
                                </a>
                                <div class="content">
                                    <a class="author">Elliot Fu</a>
                                    <div class="metadata">
                                        <span class="date">Yesterday at 12:30AM</span>
                                    </div>
                                    <div class="text">
                                        <p>This has been very useful for my research. Thanks as well!</p>
                                    </div>
                                    <div class="actions">
                                        <a class="reply">Reply</a>
                                    </div>
                                </div>
                                <div class="comments">
                                    <div class="comment">
                                        <a class="avatar">
                                            <img src="https://semantic-ui.com/images/avatar/small/jenny.jpg">
                                        </a>
                                        <div class="content">
                                            <a class="author">Jenny Hess</a>
                                            <div class="metadata">
                                                <span class="date">Just now</span>
                                            </div>
                                            <div class="text">
                                                Elliot you are always so right :)
                                            </div>
                                            <div class="actions">
                                                <a class="reply">Reply</a>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="comment">
                                <a class="avatar">
                                    <img src="https://semantic-ui.com/images/avatar/small/joe.jpg">
                                </a>
                                <div class="content">
                                    <a class="author">Joe Henderson</a>
                                    <div class="metadata">
                                        <span class="date">5 days ago</span>
                                    </div>
                                    <div class="text">
                                        Dude, this is awesome. Thanks so much
                                    </div>
                                    <div class="actions">
                                        <a class="reply">Reply</a>
                                    </div>
                                </div>
                            </div>
                            <!--*/-->
                        </div>
                    </div>
                </div>
                          <div id="comment-form" class="ui form">
                              <input type="hidden" name="blog.id" th:value="${blog.id}">
                              <input type="hidden" name="parentComment.id" value="-1">
                            <div class="ui reply form">
                                <div class="field">
                                  <textarea name="content" placeholder="Please enter your message..."></textarea>
                                </div>
                                <div class="fields">
                                    <div class="field m-mobile-wide m-margin-bottom-mini">
                                        <div class="ui left icon input">
                                            <i class="user icon"></i>
                                            <input type="text" name="nickname" placeholder="Username" th:value="${session.user}!=null ? ${session.user.nickname}">
                                        </div>
                                    </div>
                                    <div class="field m-mobile-wide m-margin-bottom-mini">
                                        <div class="ui left icon input">
                                            <i class="mail icon"></i>
                                            <input type="text" name="email" placeholder="Email" th:value="${session.user}!=null ? ${session.user.email}">
                                        </div>
                                    </div>

                                    <div class="field m-mobile-wide m-margin-bottom-mini">
                                        <button id="comment-post-btn" class=" m-mobile-wide ui teal button">
                                            <i class="edit icon"></i>
                                            Post
                                        </button>
                                    </div>
                                </div>
                              </div>
                          </div>
                </div>
            </div>
        </div>
    </div>

    <div id="tools" class=" m-fixed m-right-bottom m-padding-tb-large-buttons" style="display:none !important;">
        <div class="ui vertical icon buttons">
            <button class="ui toc-btn teal button">Directory</button>
            <a href="#comment-container" class="ui teal button">Comment</a>
            <button class="ui wechat-btn icon button"><i class="wechat icon"></i></button>
            <a id="toTop-btn" class="ui button"><i class="chevron up icon"></i></a>
        </div>
    </div>

    <div class="ui topic flowing popup transition hidden" style="width:250px !important;">
        <ol class="js-toc m-text-lined m-hover-color" style="padding:4px 8px !important;font-weight: 300 !important;"></ol>
    </div>

    <div id="qrcode" class="ui wechat-qr flowing popup transition hidden" style="width: 130px !important;">

    </div>


    <!-- 底部 -->
    <footer th:replace="_fragment :: footer" class="ui inverted vertical segment m-padding-tb-massive">
    </footer>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>

<!-- Scroll To -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script>

<!-- Way Point -->
<script th:src="@{/js/jquery.waypoints.min.js}" ></script>
    <script th:inline="javascript">
        $(function (){
            $("#comment-place").load(/*[[@{/comments/{id}(id=${blog.id})}]]*/)
        })

        $("#sidebar").click(function(){
            $('.m-item').toggleClass('m-mobile-hide')
        })

        $('#payBtn')
        .popup({
            popup : $('.pay.popup'),
            on : 'click',
            position : 'bottom center'
        })

        $('.toc-btn')
        .popup({
            popup : $('.topic.popup'),
            on : 'click',
            position : 'left center'
        })

        $('.wechat-btn')
        .popup({
            popup : $('.wechat-qr.popup'),
            on : 'hover',
            position : 'left center'
        })

        $("#toTop-btn").click(function(){
            $(window).scrollTo(0,500)
        })

        var waypoint = new Waypoint({
        element: $("#waypoint"),
        handler: function(direction) {
            if(direction == "down"){
                $("#tools").show(300)
            }else{
                $("#tools").hide(300)
            }
            //console.log('Scrolled to waypoint!' + direction)
        }
        })

        function reply(obj){
            let commentId = $(obj).data('commentid')
            let commentUsername = $(obj).data('commentusername')
            $("[name='content']").attr('placeholder',"@"+commentUsername).focus()
            $("[name='parentComment.id']").val(commentId)
            $(window).scrollTo($('#comment-form'),500)

        }

        $('#comment-post-btn').click(function(){
            let flag = $('.ui.form').form('validate form')
            if (flag[0] == true){
                postData()
            }
        })

        function postData(){

            $("#comment-place").load("/comments",{
                'parentComment.id' : $("[name='parentComment.id']").val(),
                'blog.id': $("[name='blog.id']").val(),
                'nickname': $("[name='nickname']").val(),
                'email': $("[name='email']").val(),
                'content': $("[name='content']").val(),
            },function(responseTxt,statusTxt,xhr){
                // $(window).scrollTo($('#comment-place'),500)
                if($("[name='nickname']").val() !== "EzraChai" && $("[name='email']").val() !== "juanzhe2@gmail.com"){
                    clearContent()
                }else{
                    $("[name='content']").val('')
                }
            });
        }

        function clearContent(){
            $("[name='content']").val('')
            $("[name='nickname']").val('')
            $("[name='email']").val('')
            $("[name='parentComment.id']").val(-1)
            $("[name='content']").attr('placeholder',"Please enter your message...")
        }

        $('.ui.form')
            .form({
                fields: {
                    content: {
                        identifier: 'content',
                        rules: [{
                            type: 'empty',
                            prompt: 'Please enter your Comment\'s content.'
                        }]},
                    nickname: {
                        identifier: 'nickname',
                        rules: [{
                            type: 'empty',
                            prompt: 'Please enter your username.'
                        }]},
                    email: {
                        identifier: 'email',
                        rules: [{
                            type: 'email',
                            prompt: 'Please enter your email correctly.'
                        }]},
                }
            })

        // Select all links with hashes
        $('a[href*="#"]')
            // Remove links that don't actually link to anything
            .not('[href="#"]')
            .not('[href="#0"]')
            .click(function(event) {
                // On-page links
                if (
                    location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')
                    &&
                    location.hostname == this.hostname
                ) {
                    // Figure out element to scroll to
                    var target = $(this.hash);
                    target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');
                    // Does a scroll target exist?
                    if (target.length) {
                        // Only prevent default if animation is actually gonna happen
                        event.preventDefault();
                        $('html, body').animate({
                            scrollTop: target.offset().top
                        }, 1000, function() {
                            // Callback after animation
                            // Must change focus!
                            var $target = $(target);
                            $target.focus();
                            if ($target.is(":focus")) { // Checking if the target was focused
                                return false;
                            } else {
                                $target.attr('tabindex','-1'); // Adding tabindex for elements not focusable
                                $target.focus(); // Set focus again
                            };
                        });
                    }
                }
            });
    </script>
    <script th:src="@{/js/prism.js}"></script>

    <!-- Auto Topic Generator -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.11.1/tocbot.min.js"></script>
    <script>
        tocbot.init({
            // Where to render the table of contents.
            tocSelector: '.js-toc',
            // Where to grab the headings to build the table of contents.
            contentSelector: '.js-toc-content',
            // Which headings to grab inside of the contentSelector element.
            headingSelector: 'h1, h2, h3',
            // For headings inside relative or absolute positioned containers within content.
            hasInnerContainers: true,
          });
    </script>

    <!-- QrCode -->
    <script th:src="@{/js/qrcode.min.js}"></script>
    <script th:inline="javascript">
        let server = /*[[#{server}]]*/"";
        let url = /*[[@{blog/{id}(id = ${blog.id})}]]*/"";
        let qrcode = new QRCode("qrcode", {
            text: server + url,
            width: 115,
            height: 115,
            colorDark : "#000000",
            colorLight : "#ffffff",
            correctLevel : QRCode.CorrectLevel.H
        });
    </script>
</body>
</html>
